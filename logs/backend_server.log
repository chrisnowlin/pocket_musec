INFO:     Will watch for changes in these directories: ['/Users/cnowlin/Developer/pocket_musec']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [96730] using WatchFiles
Starting PocketMusec API server...
Host: 0.0.0.0
Port: 8000
Auto-reload: True
API Docs: http://0.0.0.0:8000/api/docs

INFO:     Started server process [96732]
INFO:     Waiting for application startup.
2025-11-13 15:57:38,925 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 15:57:38,925 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 15:57:38,926 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 15:57:38,926 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 15:57:38,926 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 15:57:38,926 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 15:57:38,927 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 15:57:38,928 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 15:57:38,928 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 15:57:38,928 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 15:57:38,928 - backend.api.main - INFO - Database migrations completed
2025-11-13 15:57:38,928 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 15:57:40,652 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 15:57:40,652 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57427 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57430 - "POST /api/sessions/test-session/chat HTTP/1.1" 404 Not Found
2025-11-13 15:58:06,118 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 15:58:06,118 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 15:58:06,118 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 15:58:06,118 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 15:58:06,148 - backend.api.routes.sessions - INFO - Restored 1 messages to conversation history
2025-11-13 15:58:06,149 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
2025-11-13 15:58:09,338 - backend.pocketflow.lesson_agent - WARNING - No grade level provided for standards search
INFO:     127.0.0.1:57434 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages HTTP/1.1" 200 OK
2025-11-13 16:00:41,995 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:41,995 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:00:42,001 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,001 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:00:42,017 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,017 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57511 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57512 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:57514 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:57516 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:57510 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57513 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:57524 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:00:42,027 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,027 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:00:42,029 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,029 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:00:42,032 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,032 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57528 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57530 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:57531 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57533 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:57534 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:57536 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:00:42,050 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,050 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57539 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:57524 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:00:42,055 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:42,055 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57542 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:57545 - "DELETE /api/sessions/a79d5b0e-7e1d-44dd-a875-b16ed37b94cd HTTP/1.1" 200 OK
2025-11-13 16:00:50,675 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:50,675 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57548 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57551 - "DELETE /api/sessions/1e12fe98-0819-4d92-a9ca-67c06e62f8e9 HTTP/1.1" 200 OK
2025-11-13 16:00:56,192 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:56,192 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57554 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:00:58,527 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:58,527 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57557 - "GET /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86 HTTP/1.1" 200 OK
2025-11-13 16:00:58,537 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:58,537 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57560 - "GET /api/standards HTTP/1.1" 200 OK
2025-11-13 16:00:58,565 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:00:58,566 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57563 - "GET /api/sessions HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'generate_objective_embeddings.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 16:01:12,303 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [96732]
INFO:     Started server process [99305]
INFO:     Waiting for application startup.
2025-11-13 16:01:12,994 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 16:01:12,995 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 16:01:12,995 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 16:01:12,995 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 16:01:12,996 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 16:01:12,997 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 16:01:12,997 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 16:01:12,997 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 16:01:12,997 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 16:01:12,997 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 16:01:12,997 - backend.api.main - INFO - Database migrations completed
2025-11-13 16:01:12,997 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'simple_objective_embeddings.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 16:01:16,230 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [99305]
INFO:     Started server process [99479]
INFO:     Waiting for application startup.
2025-11-13 16:01:16,905 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 16:01:16,905 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 16:01:16,906 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 16:01:16,906 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 16:01:16,906 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 16:01:16,906 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 16:01:16,907 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 16:01:16,908 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 16:01:16,908 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 16:01:16,908 - backend.api.main - INFO - Database migrations completed
2025-11-13 16:01:16,908 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 16:02:32,771 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:02:32,772 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:02:32,772 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:02:32,772 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:02:32,802 - backend.api.routes.sessions - INFO - Restored 3 messages to conversation history
2025-11-13 16:02:32,804 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
INFO:     127.0.0.1:57608 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:03:55,107 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:03:55,107 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:03:55,108 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:03:55,108 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:03:55,108 - backend.api.routes.sessions - INFO - Restored 6 messages to conversation history
2025-11-13 16:03:55,109 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
INFO:     127.0.0.1:57628 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:06:16,181 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:06:16,181 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:06:16,181 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:06:16,181 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:06:16,181 - backend.api.routes.sessions - INFO - Restored 9 messages to conversation history
2025-11-13 16:06:16,183 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
2025-11-13 16:06:22,053 - backend.pocketflow.lesson_agent - INFO - Found 4 relevant standards using semantic search
INFO:     127.0.0.1:57676 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages/stream HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'check_embeddings_progress.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 16:08:36,496 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [99479]
INFO:     Started server process [791]
INFO:     Waiting for application startup.
2025-11-13 16:08:37,203 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 16:08:37,203 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 16:08:37,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 16:08:37,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 16:08:37,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 16:08:37,204 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 16:08:37,205 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 16:08:37,206 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 16:08:37,206 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 16:08:37,206 - backend.api.main - INFO - Database migrations completed
2025-11-13 16:08:37,206 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
INFO:     127.0.0.1:57817 - "POST /api/sessions/test-chat/messages HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57820 - "GET /api/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57822 - "GET / HTTP/1.1" 200 OK
2025-11-13 16:12:57,351 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:12:57,351 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:12:57,351 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:12:57,351 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:12:57,385 - backend.api.routes.sessions - INFO - Restored 12 messages to conversation history
2025-11-13 16:12:57,387 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
2025-11-13 16:13:01,498 - backend.pocketflow.lesson_agent - INFO - Found 4 relevant standards using semantic search
INFO:     127.0.0.1:57872 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:13:30,214 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,214 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:13:30,220 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,220 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:13:30,235 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,235 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57902 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57903 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:57906 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:57908 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:57901 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57905 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:57919 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:13:30,243 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,243 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57920 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:13:30,245 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,245 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:13:30,250 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,250 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57917 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:13:30,264 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,265 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57924 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57925 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:57926 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:57932 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:57929 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:57919 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:13:30,270 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:30,270 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57935 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:13:32,705 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:32,705 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57938 - "GET /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86 HTTP/1.1" 200 OK
2025-11-13 16:13:32,716 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:32,717 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57941 - "GET /api/standards HTTP/1.1" 200 OK
2025-11-13 16:13:32,778 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:32,778 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:57944 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:13:49,799 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:49,799 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:13:49,799 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:13:49,800 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:13:49,800 - backend.api.routes.sessions - INFO - Restored 15 messages to conversation history
2025-11-13 16:13:49,802 - backend.api.routes.sessions - INFO - Conversation history saved for session e4d36ab8-3129-49ad-b124-b2dd99513a86
2025-11-13 16:13:53,676 - backend.pocketflow.lesson_agent - INFO - Found 4 relevant standards using semantic search
INFO:     127.0.0.1:57951 - "POST /api/sessions/e4d36ab8-3129-49ad-b124-b2dd99513a86/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:26:12,702 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:26:12,702 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58202 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:26:13,903 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:26:13,903 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:26:13,903 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:26:13,904 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:26:13,904 - backend.api.routes.sessions - INFO - Conversation history saved for session a567f538-0d14-41a9-8797-d67acd24ba9c
2025-11-13 16:26:18,858 - backend.pocketflow.lesson_agent - INFO - Found 4 relevant standards using semantic search
2025-11-13 16:26:27,918 - backend.api.routes.sessions - ERROR - Error in send_message for session a567f538-0d14-41a9-8797-d67acd24ba9c: Object of type Standard is not JSON serializable
INFO:     127.0.0.1:58205 - "POST /api/sessions/a567f538-0d14-41a9-8797-d67acd24ba9c/messages HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 16:26:56,626 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [791]
INFO:     Started server process [6901]
INFO:     Waiting for application startup.
2025-11-13 16:26:57,369 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 16:26:57,369 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 16:26:57,370 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 16:26:57,370 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 16:26:57,371 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 16:26:57,372 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 16:26:57,372 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 16:26:57,372 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 16:26:57,372 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 16:26:57,372 - backend.api.main - INFO - Database migrations completed
2025-11-13 16:26:57,372 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 16:26:59,196 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:26:59,196 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:26:59,197 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:26:59,197 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:26:59,230 - backend.api.routes.sessions - INFO - Restored 1 messages to conversation history
2025-11-13 16:26:59,231 - backend.api.routes.sessions - INFO - Conversation history saved for session a567f538-0d14-41a9-8797-d67acd24ba9c
2025-11-13 16:27:02,220 - backend.pocketflow.lesson_agent - INFO - Found 4 relevant standards using semantic search
INFO:     127.0.0.1:58229 - "POST /api/sessions/a567f538-0d14-41a9-8797-d67acd24ba9c/messages HTTP/1.1" 200 OK
2025-11-13 16:27:13,679 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:13,680 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:13,680 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:13,680 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:13,680 - backend.api.routes.sessions - INFO - Restored 3 messages to conversation history
2025-11-13 16:27:13,680 - backend.api.routes.sessions - ERROR - Error in send_message for session a567f538-0d14-41a9-8797-d67acd24ba9c: 'dict' object has no attribute 'standard_id'
INFO:     127.0.0.1:58242 - "POST /api/sessions/a567f538-0d14-41a9-8797-d67acd24ba9c/messages HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 16:27:19,423 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [6901]
INFO:     Started server process [7555]
INFO:     Waiting for application startup.
2025-11-13 16:27:20,146 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 16:27:20,146 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 16:27:20,146 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 16:27:20,147 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 16:27:20,148 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 16:27:20,148 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 16:27:20,148 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 16:27:20,148 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 16:27:20,148 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 16:27:20,149 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 16:27:20,149 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 16:27:20,149 - backend.api.main - INFO - Database migrations completed
2025-11-13 16:27:20,149 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 16:27:20,673 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:20,673 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:20,673 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:20,674 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:20,706 - backend.api.routes.sessions - INFO - Restored 1 messages to conversation history
2025-11-13 16:27:20,708 - backend.api.routes.sessions - INFO - Conversation history saved for session a567f538-0d14-41a9-8797-d67acd24ba9c
2025-11-13 16:27:23,630 - backend.pocketflow.lesson_agent - WARNING - No grade level provided for standards search
INFO:     127.0.0.1:58251 - "POST /api/sessions/a567f538-0d14-41a9-8797-d67acd24ba9c/messages HTTP/1.1" 200 OK
2025-11-13 16:27:33,487 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:33,487 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58260 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:27:35,078 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:35,078 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:35,078 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:27:35,078 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:27:35,079 - backend.api.routes.sessions - INFO - Conversation history saved for session 698d2a09-da44-4de8-a7d6-da25a5a11d2a
2025-11-13 16:27:38,492 - backend.pocketflow.lesson_agent - INFO - Found 5 relevant standards using semantic search
INFO:     127.0.0.1:58262 - "POST /api/sessions/698d2a09-da44-4de8-a7d6-da25a5a11d2a/messages HTTP/1.1" 200 OK
2025-11-13 16:28:40,919 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:28:40,919 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:28:40,919 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:28:40,920 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:28:40,920 - backend.api.routes.sessions - INFO - Restored 2 messages to conversation history
2025-11-13 16:28:40,921 - backend.api.routes.sessions - INFO - Conversation history saved for session 698d2a09-da44-4de8-a7d6-da25a5a11d2a
2025-11-13 16:28:40,921 - backend.pocketflow.lesson_agent - INFO - Searching for teaching strategies with query: rhythm composition teaching strategies pedagogical approaches instructional methods activities
2025-11-13 16:28:42,810 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 teaching strategy context items
2025-11-13 16:28:42,810 - backend.pocketflow.lesson_agent - INFO - Searching for assessment guidance with query: rhythm composition assessment strategies evaluation methods rubrics formative assessment
2025-11-13 16:28:44,453 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 assessment guidance context items
2025-11-13 16:28:44,454 - backend.pocketflow.lesson_agent - INFO - Searching web for educational resources: rhythm composition
2025-11-13 16:28:45,218 - backend.services.web_search_service - INFO - Search completed: 2 results in 0.76s
2025-11-13 16:28:45,218 - backend.pocketflow.lesson_agent - INFO - Retrieved 2 web search context items
2025-11-13 16:28:45,218 - backend.pocketflow.lesson_agent - INFO - Generating lesson plan with 5 teaching, 5 assessment, and 2 web search context items
INFO:     127.0.0.1:58302 - "POST /api/sessions/698d2a09-da44-4de8-a7d6-da25a5a11d2a/messages HTTP/1.1" 200 OK
2025-11-13 16:32:03,592 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,592 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,600 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,600 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,615 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,616 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58374 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58377 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58380 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58381 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58372 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58375 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58389 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:03,624 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,624 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,638 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,639 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,653 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,654 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58391 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58393 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58397 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58398 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58401 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:32:03,659 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,659 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58400 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58409 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:58389 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:03,664 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,664 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58412 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:32:03,676 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,677 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,684 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,684 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,699 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,699 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58419 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58420 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58423 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58424 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58418 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58421 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58430 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:03,711 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,711 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,713 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,713 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:03,719 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,720 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58437 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58435 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58439 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58441 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58444 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:32:03,739 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,739 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58443 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58447 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:32:03,743 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:03,743 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58450 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:58430 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:13,760 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,760 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58472 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:32:13,775 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,776 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58477 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58480 - "GET /api/drafts HTTP/1.1" 200 OK
2025-11-13 16:32:13,781 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,782 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,784 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,784 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,808 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,809 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58473 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:32:13,828 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,828 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58476 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:32:13,845 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,845 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,847 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,847 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58481 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58487 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58488 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58492 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58493 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58496 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58486 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58499 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58504 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:32:13,860 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,860 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58507 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58489 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58501 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:13,864 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,864 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,866 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,866 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,879 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,880 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:32:13,887 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:32:13,888 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58519 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:58521 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58517 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58528 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58529 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58518 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58512 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58532 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58533 - "GET /api/standards HTTP/1.1" 200 OK
2025-11-13 16:32:13,907 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:13,908 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58536 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:32:13,908 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58541 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58517 - "GET /api/images/ HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58542 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58501 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:32:13,915 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58545 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,953 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,955 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58568 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,958 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58569 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58570 - "GET /api/images HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58571 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58572 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,958 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58575 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,959 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58577 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,959 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58578 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,959 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58581 - "GET /api/images HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58583 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58584 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58585 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,962 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,963 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58599 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58600 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,966 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,966 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,966 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,966 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58606 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58607 - "GET /api/images HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,967 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,967 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,967 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58610 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58611 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,967 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:15,967 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58614 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58615 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:15,968 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58616 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58617 - "GET /api/images HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58620 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58621 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:22,969 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58633 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:24,481 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58636 - "POST /api/sessions/698d2a09-da44-4de8-a7d6-da25a5a11d2a/messages HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,695 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:37,695 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:37,696 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:37,696 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58647 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,697 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58648 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,700 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58651 - "GET /api/images HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58652 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58655 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,700 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58656 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,701 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58664 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,701 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58665 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58666 - "GET /api/images HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:37,702 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:37,702 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:37,703 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58670 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58671 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58672 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,331 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:39,331 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58684 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58686 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,331 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:39,331 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58689 - "GET /api/images HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58690 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,333 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:39,333 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58693 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58694 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,334 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:39,334 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
2025-11-13 16:32:39,334 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58701 - "POST /api/sessions HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,335 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58703 - "GET /api/sessions HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58705 - "GET /api/images HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,335 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58706 - "GET /api/images/storage/info HTTP/1.1" 429 Too Many Requests
2025-11-13 16:32:39,335 - backend.api.middleware - WARNING - Rate limit exceeded for IP: 127.0.0.1
INFO:     127.0.0.1:58709 - "GET /api/drafts HTTP/1.1" 429 Too Many Requests
INFO:     127.0.0.1:58710 - "GET /api/standards HTTP/1.1" 429 Too Many Requests
2025-11-13 16:34:05,682 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,682 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:34:05,689 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,689 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:34:05,691 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,691 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58740 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58741 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58743 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58739 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58745 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58742 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:34:05,712 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,712 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58755 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:34:05,714 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,714 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:34:05,720 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,721 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58753 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58758 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58761 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58763 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58765 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58764 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58755 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:34:05,741 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,741 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58768 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:34:05,745 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:05,745 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58771 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:34:09,019 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:09,020 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58782 - "GET /api/standards?strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:34:10,437 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:10,438 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58788 - "GET /api/standards?grade_level=3&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:34:12,846 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:12,846 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58792 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:34:19,510 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:19,510 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58797 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:34:19,520 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:19,520 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58800 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:34:19,531 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:19,531 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58803 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:34:25,347 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:25,347 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58807 - "GET /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa HTTP/1.1" 200 OK
2025-11-13 16:34:25,352 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:25,352 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58810 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:34:25,358 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:25,359 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58813 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:34:39,945 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:39,945 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:34:39,945 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:34:39,945 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:34:39,948 - backend.api.routes.sessions - INFO - Conversation history saved for session d3905f61-6edb-4598-acfa-ac18e9bb41fa
INFO:     127.0.0.1:58817 - "POST /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:35:53,976 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:35:53,977 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:35:53,977 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:35:53,977 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:35:53,977 - backend.api.routes.sessions - INFO - Restored 3 messages to conversation history
2025-11-13 16:35:53,979 - backend.api.routes.sessions - INFO - Conversation history saved for session d3905f61-6edb-4598-acfa-ac18e9bb41fa
2025-11-13 16:35:58,026 - backend.pocketflow.lesson_agent - WARNING - No semantic search results found for query: Create strand Objectives
INFO:     127.0.0.1:58829 - "POST /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:36:26,159 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,159 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:36:26,168 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,168 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:36:26,182 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,182 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58852 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58853 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58855 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58857 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58851 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58854 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58861 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:36:26,191 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,191 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58867 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:36:26,194 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,195 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58870 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58871 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:36:26,203 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,203 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:36:26,217 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,217 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58874 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58876 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58880 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:58861 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58879 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:36:26,223 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:26,223 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58883 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:36:28,165 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:28,165 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58886 - "GET /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa HTTP/1.1" 200 OK
2025-11-13 16:36:28,176 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:28,176 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58889 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:36:28,207 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:28,207 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58892 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:36:28,233 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:36:28,233 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58895 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:37:12,830 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:37:12,830 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:37:12,830 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:37:12,831 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:37:12,831 - backend.api.routes.sessions - INFO - Restored 6 messages to conversation history
2025-11-13 16:37:12,833 - backend.api.routes.sessions - INFO - Conversation history saved for session d3905f61-6edb-4598-acfa-ac18e9bb41fa
2025-11-13 16:37:12,833 - backend.pocketflow.lesson_agent - INFO - Searching for teaching strategies with query: Create strand Objectives teaching strategies pedagogical approaches instructional methods activities
2025-11-13 16:37:14,830 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 teaching strategy context items
2025-11-13 16:37:14,830 - backend.pocketflow.lesson_agent - INFO - Searching for assessment guidance with query: Create strand Objectives assessment strategies evaluation methods rubrics formative assessment
2025-11-13 16:37:16,406 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 assessment guidance context items
2025-11-13 16:37:16,406 - backend.pocketflow.lesson_agent - INFO - Searching web for educational resources: Create strand Objectives
2025-11-13 16:37:17,452 - backend.services.web_search_service - INFO - Search completed: 3 results in 1.05s
2025-11-13 16:37:17,453 - backend.pocketflow.lesson_agent - INFO - Retrieved 3 web search context items
2025-11-13 16:37:17,453 - backend.pocketflow.lesson_agent - INFO - Generating lesson plan with 5 teaching, 5 assessment, and 3 web search context items
INFO:     127.0.0.1:58910 - "POST /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:41:10,875 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:10,876 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:10,877 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:10,877 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:10,877 - backend.api.routes.sessions - INFO - Restored 9 messages to conversation history
2025-11-13 16:41:10,879 - backend.api.routes.sessions - INFO - Conversation history saved for session d3905f61-6edb-4598-acfa-ac18e9bb41fa
INFO:     127.0.0.1:58966 - "POST /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa/messages/stream HTTP/1.1" 200 OK
2025-11-13 16:41:44,232 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,232 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:44,240 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,241 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58981 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58983 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58986 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58980 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:41:44,243 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,243 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:44,246 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,246 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:44,260 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,261 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:58989 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58987 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:58993 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:58995 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58998 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59001 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59003 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:41:44,290 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,290 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:44,293 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,293 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59008 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59012 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59003 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59011 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:41:44,310 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:44,310 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59015 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:41:47,818 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:47,818 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59018 - "GET /api/sessions/08d7e3c0-d276-4f64-a14c-844c3bc79ffb HTTP/1.1" 200 OK
2025-11-13 16:41:47,822 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:47,822 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59021 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:41:47,828 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:47,828 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:41:47,831 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:47,831 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59024 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59027 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:41:48,783 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:48,783 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59030 - "GET /api/sessions/d3905f61-6edb-4598-acfa-ac18e9bb41fa HTTP/1.1" 200 OK
2025-11-13 16:41:48,793 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:48,793 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59033 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
2025-11-13 16:41:48,872 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:48,872 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59036 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:41:48,931 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:41:48,932 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59039 - "GET /api/standards?grade_level=2&strand_code=CREATE HTTP/1.1" 200 OK
INFO:     127.0.0.1:59042 - "GET /api/drafts/52803d74-1e2e-499e-ad7b-cc617eeb9692 HTTP/1.1" 200 OK
2025-11-13 16:43:00,964 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:00,964 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:00,966 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:00,967 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:00,968 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:00,968 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59067 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59069 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59070 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59066 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59072 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59068 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:59080 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:43:00,993 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:00,994 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59084 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59088 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:43:01,012 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,012 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:01,014 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,014 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:01,029 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,030 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59090 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59093 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59096 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59098 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59080 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59097 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:43:01,045 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,045 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59101 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 16:43:01,700 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,700 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:01,702 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,702 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:01,711 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,711 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59108 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59109 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59110 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59114 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59116 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59113 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 16:43:01,730 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,730 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59126 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 16:43:01,732 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,732 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 16:43:01,740 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,740 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59124 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 16:43:01,754 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,755 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59129 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59132 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59133 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59139 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59137 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59134 - "GET /api/images/storage/info HTTP/1.1" 200 OK
INFO:     127.0.0.1:59137 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 16:43:01,766 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 16:43:01,766 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59142 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 17:30:42,932 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,932 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:42,934 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,935 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:42,948 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,949 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59257 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59261 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59262 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59263 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59254 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59260 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 17:30:42,954 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,954 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59266 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59272 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59276 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
2025-11-13 17:30:42,964 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,964 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:42,965 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,966 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:42,981 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,981 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59278 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59282 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59283 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59286 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59272 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59284 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 17:30:42,987 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:42,988 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59290 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 17:30:44,022 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,023 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:44,031 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,031 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:44,033 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,033 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59297 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59299 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59301 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59296 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59303 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59305 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 17:30:44,052 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,052 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:30:44,059 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,060 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59313 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 17:30:44,073 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,073 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59315 - "GET /api/images HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59317 - "GET /api/drafts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59319 - "GET /api/standards HTTP/1.1" 200 OK
INFO:     127.0.0.1:59323 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59325 - "GET /api/images/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59322 - "GET /api/images/storage/info HTTP/1.1" 200 OK
2025-11-13 17:30:44,078 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,078 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59328 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59325 - "GET /api/images/ HTTP/1.1" 200 OK
2025-11-13 17:30:44,085 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:30:44,085 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59331 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 17:32:02,020 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:02,021 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59359 - "GET /api/sessions/336b1a73-70cd-4725-ae28-8151290d2f19 HTTP/1.1" 200 OK
2025-11-13 17:32:02,025 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:02,025 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59362 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 17:32:02,031 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:02,031 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:32:02,034 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:02,034 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59365 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59368 - "GET /api/standards?grade_level=3&strand_code=CONNECT HTTP/1.1" 200 OK
2025-11-13 17:32:20,039 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:20,039 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:32:20,040 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:32:20,040 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:32:20,041 - backend.api.routes.sessions - INFO - Conversation history saved for session 336b1a73-70cd-4725-ae28-8151290d2f19
2025-11-13 17:32:24,070 - backend.pocketflow.lesson_agent - INFO - Found 3 relevant standards using semantic search
INFO:     127.0.0.1:59373 - "POST /api/sessions/336b1a73-70cd-4725-ae28-8151290d2f19/messages/stream HTTP/1.1" 200 OK
2025-11-13 17:33:01,676 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:33:01,676 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:33:01,676 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:33:01,676 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:33:01,676 - backend.api.routes.sessions - INFO - Restored 3 messages to conversation history
2025-11-13 17:33:01,677 - backend.api.routes.sessions - INFO - Conversation history saved for session 336b1a73-70cd-4725-ae28-8151290d2f19
2025-11-13 17:33:01,678 - backend.pocketflow.lesson_agent - INFO - Searching for teaching strategies with query: rhythm patterns teaching strategies pedagogical approaches instructional methods activities
2025-11-13 17:33:07,278 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 teaching strategy context items
2025-11-13 17:33:07,278 - backend.pocketflow.lesson_agent - INFO - Searching for assessment guidance with query: rhythm patterns assessment strategies evaluation methods rubrics formative assessment
2025-11-13 17:33:08,814 - backend.pocketflow.lesson_agent - INFO - Retrieved 5 assessment guidance context items
2025-11-13 17:33:08,814 - backend.pocketflow.lesson_agent - INFO - Searching web for educational resources: rhythm patterns
2025-11-13 17:33:09,389 - backend.services.web_search_service - WARNING - No results returned for query: rhythm patterns
2025-11-13 17:33:09,389 - backend.pocketflow.lesson_agent - INFO - No web search results found
2025-11-13 17:33:09,389 - backend.pocketflow.lesson_agent - INFO - Generating lesson plan with 5 teaching, 5 assessment, and 0 web search context items
INFO:     127.0.0.1:59384 - "POST /api/sessions/336b1a73-70cd-4725-ae28-8151290d2f19/messages/stream HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:37:54,087 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [7555]
INFO:     Started server process [21092]
INFO:     Waiting for application startup.
2025-11-13 17:37:55,096 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:37:55,096 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:37:55,096 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:37:55,096 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:37:55,097 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:37:55,098 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:37:55,098 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:37:55,098 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:37:55,098 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:37:55,098 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:37:55,098 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:37:55,098 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:37:56,716 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21092]
INFO:     Started server process [21189]
INFO:     Waiting for application startup.
2025-11-13 17:37:57,427 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:37:57,427 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:37:57,427 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:37:57,428 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:37:57,429 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:37:57,429 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:37:57,430 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:37:57,430 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:37:57,430 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:37:57,430 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:37:57,430 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:37:58,748 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21189]
INFO:     Started server process [21286]
INFO:     Waiting for application startup.
2025-11-13 17:37:59,503 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:37:59,503 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:37:59,503 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:37:59,504 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:37:59,505 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:37:59,505 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:37:59,505 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:37:59,505 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:37:59,505 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:37:59,506 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:37:59,506 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:37:59,506 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:37:59,506 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:01,224 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21286]
INFO:     Started server process [21380]
INFO:     Waiting for application startup.
2025-11-13 17:38:02,020 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:02,020 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:02,020 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:02,021 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:02,022 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:02,022 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:02,022 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:02,022 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:02,022 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:02,022 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:02,022 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:03,337 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21380]
INFO:     Started server process [21474]
INFO:     Waiting for application startup.
2025-11-13 17:38:04,091 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:04,091 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:04,092 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:04,092 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:04,093 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:04,094 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:04,094 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:04,094 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:04,094 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:04,094 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:06,820 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21474]
INFO:     Started server process [21661]
INFO:     Waiting for application startup.
2025-11-13 17:38:07,584 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:07,584 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:07,585 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:07,585 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:07,585 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:07,585 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:07,586 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:07,587 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:07,587 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:07,587 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:07,587 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:07,587 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:08,901 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21661]
INFO:     Started server process [21757]
INFO:     Waiting for application startup.
2025-11-13 17:38:09,658 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:09,658 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:09,659 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:09,660 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:09,660 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:09,660 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:09,660 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:09,660 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:09,661 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:09,661 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:09,661 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:09,661 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:17,745 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [21757]
INFO:     Started server process [22130]
INFO:     Waiting for application startup.
2025-11-13 17:38:18,531 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:18,531 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:18,532 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:18,532 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:18,532 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:18,532 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:18,533 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:18,534 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:18,534 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:18,534 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:18,534 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:18,534 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:21,261 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [22130]
INFO:     Started server process [22322]
INFO:     Waiting for application startup.
2025-11-13 17:38:22,009 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:22,009 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:22,010 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:22,010 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:22,011 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:22,012 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:22,012 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:22,012 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:22,012 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:22,012 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:22,012 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:22,719 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [22322]
INFO:     Started server process [22414]
INFO:     Waiting for application startup.
2025-11-13 17:38:23,570 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:23,570 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:23,571 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:23,571 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:23,571 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:23,571 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:23,572 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:23,573 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:23,573 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:23,573 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:23,573 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:23,573 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:25,491 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [22414]
INFO:     Started server process [22509]
INFO:     Waiting for application startup.
2025-11-13 17:38:26,245 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:26,245 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:26,245 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:26,246 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:26,247 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:26,247 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:26,247 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:26,247 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:26,247 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:26,248 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:26,248 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:26,248 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:26,248 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:32,008 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [22509]
INFO:     Started server process [22882]
INFO:     Waiting for application startup.
2025-11-13 17:38:32,763 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:32,763 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:32,764 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:32,764 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:32,764 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:32,764 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:32,765 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:32,766 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:32,766 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:32,766 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:32,766 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:32,766 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/pocketflow/lesson_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:35,390 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [22882]
INFO:     Started server process [23069]
INFO:     Waiting for application startup.
2025-11-13 17:38:36,146 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:36,146 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:36,147 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:36,147 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:36,147 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:36,147 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:36,148 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:36,149 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:36,149 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:36,149 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:36,149 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:36,149 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/services/web_search_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:40,089 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [23069]
INFO:     Started server process [23357]
INFO:     Waiting for application startup.
2025-11-13 17:38:41,006 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:41,006 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:41,006 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:41,007 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:41,008 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:41,008 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:41,008 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:41,008 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:41,008 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:41,008 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:41,008 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/services/web_search_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:45,352 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [23357]
INFO:     Started server process [23649]
INFO:     Waiting for application startup.
2025-11-13 17:38:46,128 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:46,129 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:46,129 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:46,129 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:46,130 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:46,131 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:46,131 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:46,131 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:46,131 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:46,131 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:46,131 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/services/web_search_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:38:48,454 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [23649]
INFO:     Started server process [23843]
INFO:     Waiting for application startup.
2025-11-13 17:38:49,203 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:38:49,203 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:38:49,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:38:49,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:38:49,204 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:38:49,204 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:38:49,205 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:38:49,206 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:38:49,206 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:38:49,206 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:38:49,206 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:38:49,206 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'backend/services/web_search_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:39:07,279 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [23843]
INFO:     Started server process [24044]
INFO:     Waiting for application startup.
2025-11-13 17:39:08,030 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:39:08,030 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:39:08,030 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:39:08,031 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:39:08,032 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:39:08,032 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:39:08,032 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:39:08,032 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:39:08,032 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:39:08,032 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:39:08,032 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_citations_fix.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:39:10,659 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [24044]
INFO:     Started server process [24148]
INFO:     Waiting for application startup.
2025-11-13 17:39:11,382 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:39:11,382 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:39:11,382 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:39:11,383 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:39:11,383 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:39:11,383 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:39:11,384 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:39:11,385 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:39:11,385 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:39:11,385 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:39:11,385 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:39:11,385 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
INFO:     127.0.0.1:59539 - "GET /health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_citations_integration.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:39:29,587 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [24148]
INFO:     Started server process [25007]
INFO:     Waiting for application startup.
2025-11-13 17:39:30,533 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:39:30,533 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:39:30,537 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:39:30,537 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:39:30,537 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:39:30,537 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:39:30,538 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:39:30,539 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:39:30,539 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:39:30,539 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:39:30,539 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:39:30,539 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_citations_integration.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:39:31,246 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [25007]
INFO:     Started server process [25114]
INFO:     Waiting for application startup.
2025-11-13 17:39:32,016 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:39:32,017 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:39:32,017 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:39:32,017 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:39:32,018 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:39:32,019 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:39:32,019 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:39:32,019 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:39:32,019 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:39:32,020 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:39:32,020 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 17:39:32,974 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:39:32,974 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59546 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59548 - "POST /api/sessions/None/chat HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59550 - "GET /docs HTTP/1.1" 404 Not Found
WARNING:  WatchFiles detected changes in 'test_citations_integration.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:39:44,543 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [25114]
INFO:     Started server process [26001]
INFO:     Waiting for application startup.
2025-11-13 17:39:45,292 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:39:45,292 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:39:45,293 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:39:45,293 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:39:45,293 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:39:45,293 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:39:45,294 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:39:45,295 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:39:45,295 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:39:45,295 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:39:45,295 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:39:45,295 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_citations_integration_fixed.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:40:06,213 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [26001]
INFO:     Started server process [26447]
INFO:     Waiting for application startup.
2025-11-13 17:40:06,939 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:40:06,939 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:40:06,939 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:40:06,940 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:40:06,941 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:40:06,941 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:40:06,941 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:40:06,941 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:40:06,941 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:40:06,942 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:40:06,942 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:40:06,942 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:40:06,942 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 17:40:07,777 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:40:07,777 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59564 - "POST /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59566 - "POST /api/sessions/None/messages HTTP/1.1" 404 Not Found
2025-11-13 17:40:09,390 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:40:09,390 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59570 - "POST /api/sessions HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_citations_integration_fixed.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-13 17:40:11,184 - backend.api.main - INFO - Shutting down PocketMusec API...
INFO:     Application shutdown complete.
INFO:     Finished server process [26447]
INFO:     Started server process [26787]
INFO:     Waiting for application startup.
2025-11-13 17:40:11,942 - backend.api.main - INFO - Starting PocketMusec API...
2025-11-13 17:40:11,942 - backend.repositories.migrations - INFO - Starting database migration...
2025-11-13 17:40:11,943 - backend.repositories.migrations - INFO - Database already at version 8, skipping standards migration
2025-11-13 17:40:11,943 - backend.repositories.migrations - INFO - Database already at version 8, skipping M3 migration
2025-11-13 17:40:11,943 - backend.repositories.migrations - INFO - Database already at version 8, skipping v4 migration
2025-11-13 17:40:11,943 - backend.repositories.migrations - INFO - Starting extended schema migration...
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Created unpacking document tables
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Created alignment document tables
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Created reference document tables
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Created extended table indexes
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Extended schema migration completed successfully
2025-11-13 17:40:11,944 - backend.repositories.migrations - INFO - Database already at version 8, skipping drafts migration
2025-11-13 17:40:11,945 - backend.repositories.migrations - INFO - Database already at version 8, skipping Kindergarten migration
2025-11-13 17:40:11,945 - backend.repositories.migrations - INFO - Database already at version 8, skipping file storage migration
2025-11-13 17:40:11,945 - backend.repositories.migrations - INFO - Database already at version 8, skipping file linking migration
2025-11-13 17:40:11,945 - backend.repositories.migrations - INFO - All migrations completed successfully
2025-11-13 17:40:11,945 - backend.api.main - INFO - Database migrations completed
2025-11-13 17:40:11,945 - backend.api.main - INFO - PocketMusec API started successfully
INFO:     Application startup complete.
2025-11-13 17:40:12,769 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:40:12,770 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
INFO:     127.0.0.1:59576 - "POST /api/sessions HTTP/1.1" 200 OK
2025-11-13 17:40:12,775 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:40:12,775 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:40:12,775 - backend.llm.embeddings - INFO - Initializing embeddings tables with proper transaction management
2025-11-13 17:40:12,775 - backend.llm.embeddings - INFO - Successfully initialized embeddings tables
2025-11-13 17:40:12,777 - backend.api.routes.sessions - INFO - Conversation history saved for session a07598a9-262b-49fb-9468-f1d6cc35f603
2025-11-13 17:40:16,295 - backend.pocketflow.lesson_agent - INFO - Found 3 relevant standards using semantic search
INFO:     127.0.0.1:59578 - "POST /api/sessions/a07598a9-262b-49fb-9468-f1d6cc35f603/messages HTTP/1.1" 200 OK
