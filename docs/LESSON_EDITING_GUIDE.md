# Lesson Editing Guide

PocketMusec provides powerful lesson editing capabilities that allow you to refine, customize, and export your generated lesson plans. This guide covers all the editing features available in the application.

## Table of Contents

- [Editing AI-Generated Lessons](#editing-ai-generated-lessons)
- [Managing Drafts](#managing-drafts)
- [Version Comparison](#version-comparison)
- [Export Options](#export-options)
- [Auto-Save Functionality](#auto-save-functionality)
- [Keyboard Shortcuts](#keyboard-shortcuts)

## Editing AI-Generated Lessons

### Identifying Editable Lessons

When PocketMusec AI generates a lesson plan, you can edit it if it contains lesson-like content such as:
- Lesson objectives
- Standards alignment
- Activities and procedures
- Assessment methods
- Materials lists

### Starting Edit Mode

1. **Hover over the AI message** - An edit button (‚úèÔ∏è) appears in the top-right corner
2. **Click the edit button** - The message switches to edit mode with a full editor interface

### Editor Features

The lesson editor includes:

- **Markdown Support** - Write using markdown formatting for headers, lists, and emphasis
- **Live Preview** - Toggle between edit, split-screen, and preview-only modes
- **Word/Character Count** - Real-time counting at the bottom of the editor
- **Fullscreen Mode** - Expand the editor to fill your entire screen
- **Auto-Save** - Changes are saved automatically as you work

#### View Modes

- **Edit Mode** - Focus on writing with just the text editor
- **Split Mode** - See editor and preview side-by-side
- **Preview Mode** - View the formatted lesson without editing controls

## Managing Drafts

### Accessing Drafts

1. Click the **"Saved Drafts"** button in the workspace
2. View all your saved lesson drafts in one place

### Draft Actions

Each draft in your library offers several actions:

- **Open** - Load the draft back into the chat for continued work
- **Edit** - Open the draft in the lesson editor for modifications
- **Export** - Download the draft in various formats
- **Delete** - Remove the draft permanently
- **Changes** - View what modifications have been made (for edited drafts)

### Search and Filter

Find specific drafts quickly using:
- **Text Search** - Search by title or content
- **Grade Filter** - Filter by grade level
- **Strand Filter** - Filter by curriculum strand

## Version Comparison

When you edit a lesson that was previously generated, PocketMusec tracks the changes:

### Viewing Changes

1. In the drafts modal, look for drafts with a purple **"Changes"** button
2. Click **"Changes"** to open the version comparison modal
3. Choose your view mode:
   - **Split View** - See original and modified versions side-by-side
   - **Original** - View only the original AI-generated version
   - **Modified** - View only your edited version

### Change Tracking

- **Line Statistics** - See how many lines were added or removed
- **Visual Indicators** - Original content appears on the left, modified on the right
- **Timestamps** - See when the original was created and when modifications were made

## Export Options

Export your lessons in multiple formats for different use cases:

### Available Formats

1. **Markdown (.md)**
   - Best for: Further editing, version control, web publishing
   - Includes: All formatting, metadata, structure
   - Compatible: GitHub, Obsidian, Notion, markdown editors

2. **PDF**
   - Best for: Printing, sharing, formal documentation
   - Includes: Formatted layout, metadata, professional appearance
   - Process: Opens browser print dialog for optimal formatting

3. **Plain Text (.txt)**
   - Best for: Email, simple text editors, compatibility
   - Includes: Content with basic metadata formatting
   - Compatible: Any text editor, email clients

### Export Metadata

All exports include:
- Lesson title
- Grade level and strand (if specified)
- Creation and modification timestamps
- Full lesson content with formatting preserved

### Export Steps

1. **From Drafts Modal**: Click **"Export"** on any draft
2. **From Editor**: Use the export option in the editor menu
3. **Choose Format**: Select your preferred export format
4. **Download**: File downloads automatically to your device

## Auto-Save Functionality

### How Auto-Save Works

PocketMusec automatically saves your work to prevent data loss:

- **Immediate Save** - When you press Ctrl+S (or Cmd+S on Mac)
- **Debounced Save** - 2 seconds after you stop typing
- **Periodic Save** - Every 30 seconds while editing
- **Recovery** - Saves to browser storage for crash recovery

### Save Status Indicators

- **Saved** - Green indicator, all changes saved
- **Saving...** - Blue indicator, save in progress
- **Unsaved changes** - Orange indicator, pending changes
- **Save failed** - Red indicator, check your connection

### Crash Recovery

If your browser closes unexpectedly:
1. Reopen PocketMusec
2. Open the lesson editor
3. You'll see a prompt asking if you want to recover unsaved changes
4. Choose **"Recover"** to restore your work

## Keyboard Shortcuts

### Editor Shortcuts

| Shortcut | Action |
|----------|--------|
| `Ctrl+S` / `Cmd+S` | Save lesson |
| `Esc` | Exit fullscreen or cancel editing |
| `Ctrl+Z` / `Cmd+Z` | Undo (in editor) |
| `Ctrl+Y` / `Cmd+Y` | Redo (in editor) |

### Navigation Shortcuts

| Shortcut | Action |
|----------|--------|
| `Tab` | Navigate between buttons and controls |
| `Enter` | Activate focused button |
| `Space` | Toggle checkboxes and buttons |

## Tips and Best Practices

### Writing Better Lessons

1. **Use Clear Headers** - Structure with `#`, `##`, `###` for hierarchy
2. **Include Standards** - Reference curriculum standards explicitly
3. **Add Time Estimates** - Include duration for activities
4. **List Materials** - Use bullet points for required supplies
5. **Format Assessments** - Use clear sections for evaluation methods

### Organizing Your Drafts

1. **Use Descriptive Titles** - Include grade level and topic
2. **Add Context** - Include specific standards or objectives
3. **Regular Cleanup** - Delete outdated or unused drafts
4. **Export Regularly** - Keep backup copies of important lessons

### Collaboration

1. **Export as Markdown** - Best for sharing with other educators
2. **Version Comparison** - Track changes made to original AI content
3. **PDF for Printing** - Use PDF for physical copies or formal distribution

## Troubleshooting

### Common Issues

**Edit button not appearing**
- Ensure the message contains lesson-like content
- Try hovering over different parts of the message
- Check that the message is from AI (not user messages)

**Auto-save not working**
- Check your internet connection
- Ensure browser storage is enabled
- Try manually saving with Ctrl+S

**Export formatting issues**
- Use Markdown format for best compatibility
- Check that your browser allows downloads
- Try a different format if PDF doesn't render correctly

**Lost work after browser crash**
- Reopen the editor immediately
- Look for the recovery prompt
- Check if browser storage was cleared in settings

### Getting Help

If you encounter issues with lesson editing:

1. **Check this guide** for common solutions
2. **Try browser refresh** to resolve temporary issues
3. **Export important work** regularly as backup
4. **Contact support** for persistent problems

---

## Feature Summary

‚úÖ **In-place editing** of AI-generated lessons  
‚úÖ **Rich markdown editor** with live preview  
‚úÖ **Version tracking** to see changes from original  
‚úÖ **Multi-format export** (Markdown, PDF, Text)  
‚úÖ **Auto-save with recovery** protection  
‚úÖ **Draft management** with search and filtering  
‚úÖ **Keyboard shortcuts** for power users  
‚úÖ **Fullscreen editing** for focused work  

Happy lesson planning with PocketMusec! üéµüìö